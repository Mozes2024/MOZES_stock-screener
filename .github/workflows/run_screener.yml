name: Run Stock Screener Daily

# 1. מתי להפעיל את הפעולה (Trigger)
on:
  # הפעלה אוטומטית: כל יום בשעה 13:00 (UTC).
  # זה שווה ערך ל-16:00 שעון ישראל ברוב השנה.
  schedule:
    - cron: '0 13 * * *'
  # מאפשר לך להפעיל את זה ידנית בלחיצת כפתור דרך לשונית Actions
  workflow_dispatch:

# הגדרת המשימות (Jobs)
jobs:
  run-screener:
    # 2. בחירת השרת: שימוש במכונה וירטואלית מבוססת לינוקס
    runs-on: ubuntu-latest
    
    # שלבי הביצוע (Steps)
    steps:
    
    # שלב א': שכפול הקוד (משיכת הקבצים מהמאגר שלך לשרת הזמני של GitHub)
    - name: Checkout repository code
      uses: actions/checkout@v4
      
    # שלב ב': הגדרת סביבת פייתון (המנוע שיריץ את הסקריפט)
    - name: Set up Python 3.10
      uses: actions/setup-python@v5
      with:
        python-version: '3.10'
        
    # שלב ג': התקנת התלויות (הספריות הנוספות שהפרויקט צריך)
    - name: Install dependencies
      run: pip install -r requirements.txt
        
    # שלב ד': הרצת הסקריפט בפועל
    - name: Execute Screener and Trading Logic
      run: python run.py
      # אין צורך להוסיף את החלק של 'env' מכיוון שבחרת לדלג על הסודות של Robinhood.
